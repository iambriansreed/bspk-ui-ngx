import{a as l,b as p,d as a}from"./chunk-X7XBFG2M.js";import{b as r}from"./chunk-RZAM6B6G.js";import{a as i,ha as s}from"./chunk-YXGO2XRJ.js";var h=class{constructor(e,t,o){this.renderer=e;this.env=t;this.updateProps(o);let n=o.reference;this.floating=new p(this.renderer),!(typeof document>"u"||!n)&&(n.addEventListener("mouseenter",this.handleOpenEvent.bind(this)),n.addEventListener("mouseleave",this.handleCloseEvent.bind(this)),n.addEventListener("focusin",this.handleOpenEvent.bind(this)),n.addEventListener("blur",this.handleCloseEvent.bind(this)),!(!this.referenceEl||!this.props().label)&&(this.renderer.setAttribute(this.referenceEl,"aria-labelledby",this.tooltipId),this.addComponent(this.props())))}props=s({});tooltipId=r("tooltip");floating;computedPlacement=s(null);tooltipComponent;get referenceEl(){return this.props().reference||null}get tooltipEl(){return this.tooltipComponent?.location.nativeElement}get arrowEl(){return this.tooltipComponent?.instance.arrowElement}updateProps(e){let t=i(i({},this.props()),e);this.props.set(t),this.tooltipComponent&&(this.tooltipComponent.instance.placement.set(this.computedPlacement()||t.placement),this.tooltipComponent.instance.label.set(t.label),this.tooltipComponent.instance.disabled.set(!!t.disabled),this.tooltipComponent.instance.showTail.set(t.showTail!==!1),this.tooltipComponent.changeDetectorRef.detectChanges())}destroy(){let e=this.props().reference;typeof document>"u"||!e||(e.removeEventListener("mouseenter",this.handleOpenEvent.bind(this)),e.removeEventListener("mouseleave",this.handleCloseEvent.bind(this)),e.removeEventListener("focusin",this.handleOpenEvent.bind(this)),e.removeEventListener("blur",this.handleCloseEvent.bind(this)))}addComponent(e=this.props()){return typeof document>"u"||!this.referenceEl||!e.label?!1:(this.tooltipComponent=l(this.env,a,"ui-tooltip"),this.tooltipEl&&this.renderer.setStyle(this.tooltipEl,"display","none"),this.tooltipComponent.instance.id.set(this.tooltipId),this.updateProps(e),!0)}handleOpenEvent(e){let t=this.props();!t.label||e.target!==this.referenceEl||t.disabled||!this.floating||(this.tooltipEl&&this.renderer.setStyle(this.tooltipEl,"display","block"),this.floating.compute({placement:this.props()?.placement||"top",reference:this.referenceEl,floating:this.tooltipEl,arrow:this.arrowEl,offsetOptions:this.arrowEl?8:4,refWidth:!1}).then(({placement:o})=>{this.tooltipEl&&o!==this.props()?.placement&&this.computedPlacement.set(o)}))}handleCloseEvent(){let{label:e}=this.props();e&&this.tooltipEl&&this.renderer.setStyle(this.tooltipEl,"display","none")}};export{h as a};
